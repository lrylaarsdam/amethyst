% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metacells.R
\name{makeMetacells}
\alias{makeMetacells}
\title{makeMetacells}
\usage{
makeMetacells(
  obj,
  reduction,
  cellN = 50,
  oversample = 1,
  mode = c("knn", "dbscan", "adaptive"),
  dims = 1:20,
  threads = 1,
  seed = NULL,
  k_extra = 10,
  eps = NULL,
  minPts = NULL
)
}
\arguments{
\item{obj}{Amethyst single-cell object (S4) with @reductions and @metadata slots.}

\item{reduction}{Name of reduction in obj@reductions to use (e.g. "irlba").}

\item{cellN}{Target number of cells per metacell (default 50).}

\item{oversample}{Oversampling factor controlling number of metacells (default 1).}

\item{mode}{Metacell construction mode: "knn", "dbscan", or "adaptive".}

\item{dims}{Dimensions of the reduction to use (default 1:20).}

\item{threads}{Unused (reserved for future parallelization; currently must be 1).}

\item{seed}{Optional random seed for reproducibility.}

\item{k_extra}{Extra neighbors to pull in during kNN group expansion (mode="knn").}

\item{eps}{DBSCAN eps parameter (mode="dbscan"; if NULL, estimated from kNN distances).}

\item{minPts}{DBSCAN minPts parameter (mode="dbscan"; if NULL, derived from cellN).}
}
\value{
A new Amethyst object of the same class, with:
\itemize{
\item \code{metadata}: rows = metacells, including \code{originating_cellIDs}
\item \code{reductions}: only a single reduction \code{mean_<reduction>} with metacell coordinates
\item \code{genomeMatrices}: cleared for downstream metacell-specific matrices
}
}
\description{
Generate metacells from a reduction embedding using kNN, DBSCAN, or an adaptive scheme.
}
